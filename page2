<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://www.gstatic.com/firebasejs/9.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.10.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.10.0/firebase-database.js"></script>
  <title>$COLLIE Reward System with Firebase</title>
</head>
<body>
  <div class="container">
    <h1>$COLLIE Rewards</h1>
    <button onclick="showAd()">Watch Ad for Points</button>
    <p>Your points: <span id="points">0</span></p>
  </div>

  <script>
    // Firebase configuration from your Firebase project
    const firebaseConfig = {
      apiKey: "AIzaSyBhJpL-nzbrCSpOAXWfpXZmsTgeCPeyu1Y",
    authDomain: "collie-on-injective.firebaseapp.com",
    projectId: "collie-on-injective",
    storageBucket: "collie-on-injective.appspot.com",
    messagingSenderId: "663589363753",
    appId: "1:663589363753:web:fa77a96f085c2806937c38",
    measurementId: "G-WV14XZYHK2"
    };

    // Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const database = firebase.database();

    let points = 0;
    let userId;

    // Sign in anonymously
    auth.signInAnonymously().then(userCredential => {
      userId = userCredential.user.uid;
      loadUserPoints(); // Load points from the database for this user
    });

    // Load points from Firebase
    function loadUserPoints() {
      const userRef = database.ref('users/' + userId);
      userRef.once('value', snapshot => {
        if (snapshot.exists()) {
          points = snapshot.val().points || 0;
          document.getElementById('points').textContent = points;
        }
      });
    }

    // Function to show ad and update points
    function showAd() {
      // Simulate ad completion (replace with Adsgram logic)
      setTimeout(() => {
        points += 10;
        document.getElementById('points').textContent = points;
        saveUserPoints();
      }, 1000); // Simulate ad completion delay
    }

    // Save updated points to Firebase
    function saveUserPoints() {
      const userRef = database.ref('users/' + userId);
      userRef.set({ points });
    }
  </script>
</body>
</html>
